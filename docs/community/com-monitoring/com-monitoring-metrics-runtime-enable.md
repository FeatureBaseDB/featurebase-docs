---
title: Runtime metrics for tools
layout: default
parent: Community monitoring
grand_parent: Community
nav_order: 2
---

# How do I enable metrics for external monitoring tools?

{% include /com-monitoring/com-monitoring-summary.md %}

## Before you begin

{% include /com-install/com-install-before-begin.md %}
* [Learn about metrics generated by FeatureBase](/docs/community/com-monitoring/com-monitoring-home)
* Setup one of the following as your a supported tool to receive metrics from FeatureBase:
  * [Setup statsd metrics](https://statsd-metrics.readthedocs.io/en/latest/){:target="_blank"}
  * [Setup Go expvar agent](https://pkg.go.dev/expvar){:target="_blank"}
  * [Setup prometheus metrics](https://prometheus.io/docs/prometheus/latest/getting_started/){:target="_blank"}
* Obtain your service IP address to send FeatureBase metrics

## Syntax

Change these parameters by editing the `*/featurebase/opt/featurebase.conf` file.

```toml

[metric]
  service= "<metric-service>"
  host="<statsd-host>"
  poll-interval= "<poll-interval>"
```

## Parameters

| Parameter | Description | Required | Additional information |
|---|---|---|---|
| `<metric-service>` | FeatureBase supports:<br/>* expvar<br/>* statsd<br/>*  prometheus<br/> | No | Comment out or set to `"none"` to disable |
| `<statsd-host>` | Remote host to send `statsd` metrics | For `statsd` metrics | Comment out to disable |
| `<poll-interval>` | An integer and time unit that determines how frequently FeatureBase checks for metrics | For `statsd` metrics and to enable runtime metrics | Comment out or set to zero to disable |

## Additional information

### Default FeatureBase ports

Default ports can be:
* used with CLI commands
* added to the [FeatureBase configuration file](/docs/community/com-config/com-config-home#where-are-configuration-files-found)

{% include /com-config/com-config-port-defaults.md %}

### Verify metrics are being generated

* Verify metrics are generated by running:

```sh
curl localhost:10101/metrics
```

### Prometheus metrics

Add featurebase metrics to the Prometheus configuration file `scrape_configs` section.

* [Prometheus example](#prometheus-example)

## Examples

### Prometheus example

Add the following to the `<scrape_config>` section of the Prometheus configuration file to monitor:
* FeatureBase metrics
* Ingester metrics

```yaml
- job_name: 'featurebase'
static_configs:
- targets: ['localhost:10101', 'localhost:10102', 'localhost:10103']

- job_name: 'ingester'
static_configs:
- targets: ['localhost:9093']
```

Add the following to the `featurebase.conf` file to enable Prometheus monitoring at a 15 second interval.

{% include /com-monitoring/com-monitoring-metrics-prometheus.md %}

## Further information

* [Prometheus configuration](https://prometheus.io/docs/prometheus/latest/configuration/configuration){:target="_blank"}
